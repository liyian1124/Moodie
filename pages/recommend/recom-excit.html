<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>recom-excit</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  
</head>

<body>

  <%- include('./layout/header-recom-excit'); -%>

<!-- 記得引入 Bootstrap Icons 的 CSS（CDN 或你自己的打包） -->


<!-- 可選：整頁背景 -->

<nav class="glass-nav" aria-label="主選單">
  <a class="glass-nav__item is-active" href="#">
    <i class="bi bi-house-door"></i><span>首頁</span>
  </a>
  <a class="glass-nav__item" href="recom-excit.html">
    <i class="bi bi-heart"></i><span>情緒片單</span>
  </a>
  <a class="glass-nav__item" href="#">
    <i class="bi bi-search"></i><span>搜尋</span>
  </a>
  <a class="glass-nav__item" href="#">
    <i class="bi bi-bookmark-dash"></i><span>個人片單</span>
  </a>
  <a class="glass-nav__item" href="#">
    <i class="bi bi-person"></i><span>帳戶</span>
  </a>
</nav>

<div class="gallery-page">
  <!-- 背景：可直向滾動長圖（捲軸隱藏） -->
  <div class="bg-scroll" aria-hidden="true">
    <img src="https://images.plurk.com/mlW6N3VhDYayt1Ga8ChNk.jpg" alt="">
  </div>

  <!-- 前景：Swiper -->
  <section class="stage ">
    <div class="stage__wrap">
      <div class="swiper myCoverflow">
        <div class="swiper-wrapper">
          <div class="swiper-slide" 
          data-key="ghost"
          data-title="鬼才知道"
          data-year="2022"
          data-duration="114"
          data-rating="6.8"
          data-match="95%契合"
          data-tags="奇幻冒險・歡樂喜劇">
          <img class="slide-img" src="/assets/images/page-emotion-recommendation/Movie-Excite-10.jpg" 
          alt="圖1" >
        </div>
          
          <div class="swiper-slide" 
          data-key="barbie" 
          data-title="芭比"
          data-year="2022"
          data-duration="114"
          data-rating="6.8"
          data-match="95%契合"
          data-tags="奇幻冒險・歡樂喜劇"
          data-top10>
          <img class="slide-img" src="/assets/images/page-emotion-recommendation/Movie-Excite-1.jpg" 
          alt="圖2" 
          alt="Top 10">
        </div>
          <div class="swiper-slide" 
          data-key="money"
          data-title="還錢"
          data-year="2022"
          data-duration="114"
          data-rating="6.8"
          data-match="95%契合"
          data-tags="奇幻冒險・歡樂喜劇">
          <img class="slide-img" src="/assets/images/page-emotion-recommendation/Movie-Excite-11.jpg" alt="圖3" ></div>
          
          <div class="swiper-slide" 
          data-key="dance"          
          data-title="快樂的一天"
          data-year="2022"
          data-duration="114"
          data-rating="6.8"
          data-match="95%契合"
          data-tags="奇幻冒險・歡樂喜劇"><img class="slide-img" src="/assets/images/page-emotion-recommendation/Movie-Excite-12.jpg" alt="圖4" ></div>
         
          <div class="swiper-slide" 
          data-key="lee"
          data-title="李小龍"
          data-year="2022"
          data-duration="114"
          data-rating="6.8"
          data-match="95%契合"
          data-tags="奇幻冒險・歡樂喜劇"><img class="slide-img" src="/assets/images/page-emotion-recommendation/Movie-Excite-2.jpg" alt="圖5" ></div>
          <div class="swiper-slide" 
          data-key="alien"
          data-title="史迪奇"
          data-year="2022"
          data-duration="114"
          data-rating="6.8"
          data-match="95%契合"
          data-tags="奇幻冒險・歡樂喜劇"><img class="slide-img" src="/assets/images/page-emotion-recommendation/Movie-Excite-3.jpg" alt="圖6" ></div>
        </div>
        <div class="swiper-pagination"></div>
        <section class="stage">
  <div class="stage__wrap">
    <div class="swiper myCoverflow">
      <!-- ...你的 slides... -->
      <div class="swiper-pagination"></div>
    </div>

    <!-- 兩個 CTA 按鈕 -->
    <div class="cta-bar">
      <button type="button" class="btn btn--ghost"  data-retry>再次捕捉感覺</button>
      <button type="button" class="btn btn--primary" data-addlist>＋ 立即加入片單</button>
    </div>
  </div>
</section>

      </div>
    </div>
  </section>

<section>
  <div class="container">
    <div class="row">
      <div class="col-12">
<button type="button">再次捕捉感覺</button>
<button type="button"><i class="bi bi-plus-lg"></i>立即加入片單</button>
      </div>
    </div>
  </div>
</section>

<!-- Modal：點中間圖開啟 -->
<div id="galleryModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="modal__backdrop" data-close="true"></div>
  <div class="modal__dialog" role="document">
    <button class="modal__close" aria-label="Close" data-close="true">×</button>
    <h2 id="modalTitle" class="modal__title"></h2>
    <div class="modal__body">
      <img id="modalImg" alt="">
      <div id="modalText"></div> <!-- ← 這裡我們用 JS 塞內容 -->
    </div>
  </div>
</div>





<script>
  document.querySelectorAll('.glass-nav__item').forEach(a=>{
    a.addEventListener('click', e=>{
      document.querySelectorAll('.glass-nav__item').forEach(x=>x.classList.remove('is-active'));
      a.classList.add('is-active');
    });
  });
</script>
<!-- Swiper JS（CDN） -->


<script type="module">
  // 初始化 Swiper（coverflow 效果）
  const swiper = new Swiper('.myCoverflow', {
    effect: 'coverflow',
    grabCursor: true,
    centeredSlides: true,
    loop: true,
    slidesPerView: 3,
    speed: 500,
    coverflowEffect: { rotate: 0, stretch: 0, depth: 160, modifier: 1, slideShadows: false },
    breakpoints: {
      0:   { slidesPerView: 1.3, coverflowEffect: { depth: 80  } },
      576: { slidesPerView: 2.2, coverflowEffect: { depth: 120 } },
      992: { slidesPerView: 3,   coverflowEffect: { depth: 180 } }
    }
  });

  // Modal 互動
  const modal = document.getElementById('galleryModal');
  const modalImg = document.getElementById('modalImg');
  const closeBtn = modal.querySelector('.modal__close');

  function openModal(imgSrc, alt = '') {
    modalImg.src = imgSrc;
    modalImg.alt = alt || 'preview';
    modal.classList.add('is-open');
    modal.setAttribute('aria-hidden', 'false');
    setTimeout(() => closeBtn.focus(), 0);
    document.documentElement.style.overflow = 'hidden';
  }
  function closeModal() {
    modal.classList.remove('is-open');
    modal.setAttribute('aria-hidden', 'true');
    document.documentElement.style.overflow = '';
  }

  modal.addEventListener('click', (e) => {
    if (e.target.matches('[data-close]')) closeModal();
  });
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.classList.contains('is-open')) closeModal();
  });

  // 僅在「中間（active 或 duplicate-active）」圖被點擊時開啟 Modal
  document.querySelector('.myCoverflow').addEventListener('click', (e) => {
    const activeImg = document.querySelector('.myCoverflow .swiper-slide-active .slide-img, .myCoverflow .swiper-slide-duplicate-active .slide-img');
    if (activeImg && activeImg.contains(e.target)) openModal(activeImg.src, activeImg.alt || '');
  });
</script>

<script>
  document.getElementById('backBtn')?.addEventListener('click', () => {
    if (history.length > 1) history.back();
    else location.href = '/'; // 沒有上一頁時要回到的預設頁，改成你的首頁路徑
  });
</script>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script type="module" src="/assets/scss/pages/slide-overlay.js"></script>
<script type="module" src="/assets/scss/pages/excite-gallery.js"></script>
<script type="module" src="/main.js"></script>
</body>
</html>
