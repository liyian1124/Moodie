import"../main-B7zGWbeX.js";new Swiper(".myCoverflow",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,loop:!0,slidesPerView:3,speed:500,coverflowEffect:{rotate:0,stretch:0,depth:160,modifier:1,slideShadows:!1},breakpoints:{0:{slidesPerView:1.3,coverflowEffect:{depth:80}},576:{slidesPerView:2.2,coverflowEffect:{depth:120}},992:{slidesPerView:3,coverflowEffect:{depth:180}}}});const o=document.getElementById("galleryModal"),d=document.getElementById("modalImg"),L=o.querySelector(".modal__close");function C(t,e=""){d.src=t,d.alt=e||"preview",o.classList.add("is-open"),o.setAttribute("aria-hidden","false"),setTimeout(()=>L.focus(),0),document.documentElement.style.overflow="hidden"}function v(){o.classList.remove("is-open"),o.setAttribute("aria-hidden","true"),document.documentElement.style.overflow=""}o.addEventListener("click",t=>{t.target.matches("[data-close]")&&v()});window.addEventListener("keydown",t=>{t.key==="Escape"&&o.classList.contains("is-open")&&v()});document.querySelector(".myCoverflow").addEventListener("click",t=>{const e=document.querySelector(".myCoverflow .swiper-slide-active .slide-img, .myCoverflow .swiper-slide-duplicate-active .slide-img");e&&e.contains(t.target)&&C(e.src,e.alt||"")});(function(){document.querySelectorAll(".myCoverflow .swiper-slide").forEach(a=>{var c;if(a.querySelector(".slide-overlay"))return;const s=a.dataset,g=s.title||((c=a.querySelector(".slide-img"))==null?void 0:c.alt)||"",w=s.year?`<span class="pill">${s.year}</span>`:"",E=s.duration?`<span class="pill"><i class="bi bi-clock"></i>${s.duration} 分鐘</span>`:"",S=s.rating?`<span class="pill"><i class="bi bi-star"></i>${s.rating}</span>`:"",$=s.match?`<span class="match">${s.match}</span>`:"",b=s.tags||"",r=document.createElement("div");r.className="slide-overlay",r.innerHTML=`
      <h3 class="slide-title">${g}</h3>
      <div class="slide-meta">${w}${E}${S}</div>
      <p class="slide-tags">${$} ${b}</p>
    `,a.appendChild(r)})})();const q={barbie:{title:"芭比 (Spirit in the Alley)",sub:"粉色療癒・成長寓意",year:2022,duration:114,rating:6.8,match:"85% 興奮感",genres:["奇幻冒險","歡樂喜劇"],overview:"在芭比樂園裡，完美生活被一連串意外打亂，她踏上尋找自我的真實旅程…",cast:[{name:"瑪格羅比",role:"芭比",avatar:"https://picsum.photos/id/64/200/200"},{name:"伊莎貝",role:"芭比",avatar:"https://picsum.photos/id/1027/200/200"},{name:"萊恩葛斯林",role:"肯尼",avatar:"https://picsum.photos/id/1005/200/200"}],similar:[{title:"Joyful Day",img:"https://picsum.photos/id/1011/300/450"},{title:"Lilo & Stitch",img:"https://picsum.photos/id/1025/300/450"}]},ghost:{title:"午夜鬼影",year:2021,duration:98,rating:7.2,match:"92% 興奮感",genres:["驚悚"],overview:"…",cast:[],similar:[]},money:{title:"金錢遊戲",year:2020,duration:110,rating:7,match:"88% 興奮感",genres:["商戰","劇情"],overview:"…",cast:[],similar:[]},dance:{title:"舞力全開",year:2019,duration:105,rating:6.9,match:"90% 興奮感",genres:["音樂","青春"],overview:"…",cast:[],similar:[]},lee:{title:"李小龍致敬作",year:1973,duration:99,rating:8.2,match:"86% 興奮感",genres:["動作"],overview:"…",cast:[],similar:[]},alien:{title:"異形宇宙",year:2017,duration:122,rating:7.1,match:"84% 興奮感",genres:["科幻","驚悚"],overview:"…",cast:[],similar:[]}},l=document.getElementById("galleryModal"),I=document.getElementById("detailPoster"),k=document.getElementById("detailTitle"),B=document.getElementById("detailSub"),T=document.getElementById("metaYear"),M=document.querySelector("#metaDuration span"),A=document.querySelector("#metaRating span"),P=document.getElementById("detailMatch"),V=document.getElementById("detailMatchText"),H=document.getElementById("detailGenres"),D=document.getElementById("detailOverview"),n=document.getElementById("detailCast"),m=document.getElementById("detailSimilar"),x=document.getElementById("secCast"),N=document.getElementById("secSimilar"),_=l.querySelector(".modal__close");function i(t,e){t&&(t.textContent=e??"")}function f(t,e){t&&(t.style.display=e?"":"none")}function j(t=[]){n.innerHTML="",t.forEach(e=>{const a=document.createElement("div");a.className="person-card",a.innerHTML=`
      <img class="avatar" src="${e.avatar}" alt="${e.name}">
      <div class="name">${e.name||""}</div>
      <div class="role">${e.role||""}</div>`,n.appendChild(a)}),f(x,t.length>0)}function O(t=[]){m.innerHTML="",t.forEach(e=>{const a=document.createElement("div");a.className="movie-card",a.innerHTML=`
      <img class="poster" src="${e.img}" alt="${e.title}">
      <div class="mtitle">${e.title||""}</div>`,n.insertAdjacentElement,m.appendChild(a)}),f(N,t.length>0)}function W(t,e,a=""){const s=q[t]||{};I.src=s.poster||e||"",i(k,s.title||a||""),i(B,s.sub||""),i(T,s.year??""),i(M,s.duration?`${s.duration} 分鐘`:""),i(A,s.rating??""),i(P,s.match||""),i(V,s.match||""),i(H,(s.genres||[]).join("・")),i(D,s.overview||""),j(s.cast),O(s.similar),l.classList.add("is-open"),l.setAttribute("aria-hidden","false"),document.documentElement.style.overflow="hidden",setTimeout(()=>_.focus(),0)}function h(){l.classList.remove("is-open"),l.setAttribute("aria-hidden","true"),document.documentElement.style.overflow=""}l.addEventListener("click",t=>{t.target.matches("[data-close]")&&h()});window.addEventListener("keydown",t=>{t.key==="Escape"&&l.classList.contains("is-open")&&h()});new Swiper(".myCoverflow",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,loop:!0,slidesPerView:3,speed:500,coverflowEffect:{rotate:0,stretch:0,depth:160,modifier:1,slideShadows:!1},breakpoints:{0:{slidesPerView:1.3,coverflowEffect:{depth:80}},576:{slidesPerView:2.2,coverflowEffect:{depth:120}},992:{slidesPerView:3,coverflowEffect:{depth:180}}}});const u=document.querySelector(".myCoverflow");u.addEventListener("click",t=>{const e=u.querySelector(".swiper-slide-active, .swiper-slide-duplicate-active");if(!(e!=null&&e.contains(t.target)))return;const a=e.querySelector(".slide-img"),s=e.dataset.key;W(s,a==null?void 0:a.src,a==null?void 0:a.alt)});function G(){const e=document.querySelector(".myCoverflow").querySelector(".swiper-slide-active, .swiper-slide-duplicate-active");return e==null?void 0:e.dataset.key}var p;(p=document.querySelector("[data-retry]"))==null||p.addEventListener("click",()=>{console.log("retry emotion capture")});var y;(y=document.querySelector("[data-addlist]"))==null||y.addEventListener("click",()=>{const t=G();t&&console.log("add to list:",t)});document.querySelectorAll(".myCoverflow .swiper-slide").forEach(t=>{var s;const e=t.dataset;if(t.querySelector(".slide-overlay"))return;const a=document.createElement("div");a.className="slide-overlay",a.innerHTML=`
    <h3 class="slide-title">${e.title||((s=t.querySelector(".slide-img"))==null?void 0:s.alt)||""}</h3>
    <div class="slide-meta">
      ${e.year?`<span class="pill">${e.year}</span>`:""}
      ${e.duration?`<span class="pill"><i class="bi bi-clock"></i>${e.duration} 分鐘</span>`:""}
      ${e.rating?`<span class="pill"><i class="bi bi-star"></i>${e.rating}</span>`:""}
    </div>
    <p class="slide-tags">
      ${e.match?`<span class="match">${e.match}</span>`:""} ${e.tags||""}
    </p>`,t.appendChild(a)});
