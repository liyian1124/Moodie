import"../main-DM7Qvriz.js";import"../slide-overlay-C7WJdBkO.js";new Swiper(".myCoverflow",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,loop:!0,slidesPerView:3,speed:500,coverflowEffect:{rotate:0,stretch:0,depth:160,modifier:1,slideShadows:!1},breakpoints:{0:{slidesPerView:1.3,coverflowEffect:{depth:80}},576:{slidesPerView:2.2,coverflowEffect:{depth:120}},992:{slidesPerView:3,coverflowEffect:{depth:180}}}});const a=document.getElementById("galleryModal"),l=document.getElementById("modalImg"),f=a.querySelector(".modal__close");function w(t,e=""){l.src=t,l.alt=e||"preview",a.classList.add("is-open"),a.setAttribute("aria-hidden","false"),setTimeout(()=>f.focus(),0),document.documentElement.style.overflow="hidden"}function p(){a.classList.remove("is-open"),a.setAttribute("aria-hidden","true"),document.documentElement.style.overflow=""}a.addEventListener("click",t=>{t.target.matches("[data-close]")&&p()});window.addEventListener("keydown",t=>{t.key==="Escape"&&a.classList.contains("is-open")&&p()});document.querySelector(".myCoverflow").addEventListener("click",t=>{const e=document.querySelector(".myCoverflow .swiper-slide-active .slide-img, .myCoverflow .swiper-slide-duplicate-active .slide-img");e&&e.contains(t.target)&&w(e.src,e.alt||"")});const h={barbie:{title:"芭比 (Spirit in the Alley)",sub:"粉色療癒・成長寓意",year:2022,duration:114,rating:6.8,match:"85% 興奮感",genres:["奇幻冒險","歡樂喜劇"],overview:"在芭比樂園裡，完美生活被一連串意外打亂，她踏上尋找自我的真實旅程…",cast:[{name:"瑪格羅比",role:"芭比",avatar:"https://picsum.photos/id/64/200/200"},{name:"伊莎貝",role:"芭比",avatar:"https://picsum.photos/id/1027/200/200"},{name:"萊恩葛斯林",role:"肯尼",avatar:"https://picsum.photos/id/1005/200/200"}],similar:[{title:"Joyful Day",img:"https://picsum.photos/id/1011/300/450"},{title:"Lilo & Stitch",img:"https://picsum.photos/id/1025/300/450"}]},ghost:{title:"午夜鬼影",year:2021,duration:98,rating:7.2,match:"92% 興奮感",genres:["驚悚"],overview:"…",cast:[],similar:[]},money:{title:"金錢遊戲",year:2020,duration:110,rating:7,match:"88% 興奮感",genres:["商戰","劇情"],overview:"…",cast:[],similar:[]},dance:{title:"舞力全開",year:2019,duration:105,rating:6.9,match:"90% 興奮感",genres:["音樂","青春"],overview:"…",cast:[],similar:[]},lee:{title:"李小龍致敬作",year:1973,duration:99,rating:8.2,match:"86% 興奮感",genres:["動作"],overview:"…",cast:[],similar:[]},alien:{title:"異形宇宙",year:2017,duration:122,rating:7.1,match:"84% 興奮感",genres:["科幻","驚悚"],overview:"…",cast:[],similar:[]}},r=document.getElementById("galleryModal"),g=document.getElementById("detailPoster"),E=document.getElementById("detailTitle"),S=document.getElementById("detailSub"),L=document.getElementById("metaYear"),$=document.querySelector("#metaDuration span"),C=document.querySelector("#metaRating span"),I=document.getElementById("detailMatch"),b=document.getElementById("detailMatchText"),k=document.getElementById("detailGenres"),B=document.getElementById("detailOverview"),n=document.getElementById("detailCast"),c=document.getElementById("detailSimilar"),q=document.getElementById("secCast"),T=document.getElementById("secSimilar"),M=r.querySelector(".modal__close");function o(t,e){t&&(t.textContent=e??"")}function v(t,e){t&&(t.style.display=e?"":"none")}function A(t=[]){n.innerHTML="",t.forEach(e=>{const s=document.createElement("div");s.className="person-card",s.innerHTML=`
      <img class="avatar" src="${e.avatar}" alt="${e.name}">
      <div class="name">${e.name||""}</div>
      <div class="role">${e.role||""}</div>`,n.appendChild(s)}),v(q,t.length>0)}function P(t=[]){c.innerHTML="",t.forEach(e=>{const s=document.createElement("div");s.className="movie-card",s.innerHTML=`
      <img class="poster" src="${e.img}" alt="${e.title}">
      <div class="mtitle">${e.title||""}</div>`,n.insertAdjacentElement,c.appendChild(s)}),v(T,t.length>0)}function V(t,e,s=""){const i=h[t]||{};g.src=i.poster||e||"",o(E,i.title||s||""),o(S,i.sub||""),o(L,i.year??""),o($,i.duration?`${i.duration} 分鐘`:""),o(C,i.rating??""),o(I,i.match||""),o(b,i.match||""),o(k,(i.genres||[]).join("・")),o(B,i.overview||""),A(i.cast),P(i.similar),r.classList.add("is-open"),r.setAttribute("aria-hidden","false"),document.documentElement.style.overflow="hidden",setTimeout(()=>M.focus(),0)}function y(){r.classList.remove("is-open"),r.setAttribute("aria-hidden","true"),document.documentElement.style.overflow=""}r.addEventListener("click",t=>{t.target.matches("[data-close]")&&y()});window.addEventListener("keydown",t=>{t.key==="Escape"&&r.classList.contains("is-open")&&y()});new Swiper(".myCoverflow",{effect:"coverflow",grabCursor:!0,centeredSlides:!0,loop:!0,slidesPerView:3,speed:500,coverflowEffect:{rotate:0,stretch:0,depth:160,modifier:1,slideShadows:!1},breakpoints:{0:{slidesPerView:1.3,coverflowEffect:{depth:80}},576:{slidesPerView:2.2,coverflowEffect:{depth:120}},992:{slidesPerView:3,coverflowEffect:{depth:180}}}});const d=document.querySelector(".myCoverflow");d.addEventListener("click",t=>{const e=d.querySelector(".swiper-slide-active, .swiper-slide-duplicate-active");if(!(e!=null&&e.contains(t.target)))return;const s=e.querySelector(".slide-img"),i=e.dataset.key;V(i,s==null?void 0:s.src,s==null?void 0:s.alt)});function D(){const e=document.querySelector(".myCoverflow").querySelector(".swiper-slide-active, .swiper-slide-duplicate-active");return e==null?void 0:e.dataset.key}var m;(m=document.querySelector("[data-retry]"))==null||m.addEventListener("click",()=>{console.log("retry emotion capture")});var u;(u=document.querySelector("[data-addlist]"))==null||u.addEventListener("click",()=>{const t=D();t&&console.log("add to list:",t)});document.querySelectorAll(".myCoverflow .swiper-slide").forEach(t=>{var i;const e=t.dataset;if(t.querySelector(".slide-overlay"))return;const s=document.createElement("div");s.className="slide-overlay",s.innerHTML=`
    <h3 class="slide-title">${e.title||((i=t.querySelector(".slide-img"))==null?void 0:i.alt)||""}</h3>
    <div class="slide-meta">
      ${e.year?`<span class="pill">${e.year}</span>`:""}
      ${e.duration?`<span class="pill"><i class="bi bi-clock"></i>${e.duration} 分鐘</span>`:""}
      ${e.rating?`<span class="pill"><i class="bi bi-star"></i>${e.rating}</span>`:""}
    </div>
    <p class="slide-tags">
      ${e.match?`<span class="match">${e.match}</span>`:""} ${e.tags||""}
    </p>`,t.appendChild(s)});
